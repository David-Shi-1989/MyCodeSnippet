## Webpack

### 1. 什么是WebPack

WebPack可以看作是模块打包机：它做的事情是，分析你的项目结构，找到JavaScript模块以及其它浏览器不能直接运行的拓展语言（Scss、TypeScript等），并将其转换和打包为合适的格式供浏览器使用。

### 2. 为什么用WebPack



### 3. webpack与其他打包工具比较

#### 3.1 grunt、gulp比较

- 三者都是前端构建工具，grunt和gulp在早期比较流行，现在webpack相对来说比较主流，不过一些轻量化的任务还是会用gulp来处理，比如单独打包css文件。
- grunt和gulp是基于任务（Task）和流（Stream）的。类似jQuery，找到一个（或一类）文件，对其做一些列链式操作，更新流上的数据，整条链式操作构成了一个任务，多个任务就构成了整个web的构建流程。
- webpack是基于入口的。webpack会自动地递归解析入口所需加载的所有资源文件，然后用不同的Loader来处理不同文件，用Plugin来扩展丰富webpack的功能。
- 从构建思路来说，gulp和grunt需要开发者将整个前端构建过程拆分为多个Task，并合理控制所有Task的调用关系。WebPack需要开发者指定入口，并需要清楚对于不同的资源应该使用什么Loader做何种解析和加工。

#### 3.2 rollup、parcel比较

- WebPack适用于大型复杂的前端站点构建。
- rollup适用于基础库的打包，如vue、rect。
- parcel适用于简单的实验性项目，它可以满足低门槛的快速查看效果。

### 3. WebPack构建流程

WebPack的运行流程是一个串行的过程，从启动到结束会依次执行以下流程：

1. 初始化参数

   从配置文件和Shell语句中读取合并参数，得出最终的参数。

2. 开始编译

   用上一部得到的参数，初始化Compiler对象，加载所有配置的插件，执行对象的run方法开始执行编译。

3. 确定入口

   根据配置中的entry找出所有的入口文件。

4. 编译模块

   从入口文件出发，调用所有配置的Loader对模块进行解析，再找出该模块依赖的模块，递归本步骤直到所有入口依赖的文件都经过了本步骤的处理。

5. 完成模块编译

   在经过第4步使用Loader解析完所有模块后，得到了每个模块被解析后的最终内容以及它们之间的依赖关系。

6. 输出资源

   根据入口和模块之间的依赖关系，组装成一个个包含多个模块的Chunk，再把每个Chunk转换成一个单独的文件加入到输出列表。本步是可以修改输出内容的最后机会。

7. 输出完成

   在确定好输出内容后，根据配置确定输出的路径和文件名，再把文件内容写入到文件系统。



### 参考文档

1. [ 关于webpack的面试题](cnblogs.com/gaoht/p/11310365.html)